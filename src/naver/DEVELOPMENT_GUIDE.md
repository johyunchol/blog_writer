# 파이썬 개발 가이드

본 문서는 '네이버 블로그 자동 포스팅 시스템' 프로젝트의 아키텍처, 개발 방법론, 코딩 스타일, 예외 처리 등 모든 개발 규칙과 모범 사례를 정의하는 통합 가이드입니다.

---

## 1. 개발 아키텍처

소프트웨어 아키텍처는 시스템의 구조, 구성 요소 및 그 관계를 정의하는 청사진입니다. 어떤 아키텍처를 선택하는지에 따라 유지보수성, 확장성, 테스트 용이성이 크게 달라집니다.

### 1.1. 주요 아키텍처 패턴

- **계층형 아키텍처 (Layered Architecture):** 시스템을 표현, 비즈니스, 데이터 접근 등 논리적인 계층으로 분리하는 가장 보편적인 구조입니다. 하지만 상위 계층이 하위 계층의 구현에 직접 의존하여 유연성이 떨어질 수 있습니다.
- **MVC 아키텍처:** 웹 애플리케이션에서 주로 사용되며, 모델(Model), 뷰(View), 컨트롤러(Controller)로 역할을 분리합니다.
- **마이크로서비스 아키텍처:** 거대한 시스템을 작고 독립적인 서비스의 조합으로 구축하는 방식입니다.

### 1.2. 클린 아키텍처와 의존성 역전 (Clean Architecture & DIP)

클린 아키텍처는 **의존성 역전 원칙(Dependency Inversion Principle)**을 적용하여 계층형 아키텍처의 단점을 해결한 진보된 구조입니다. 핵심은 **"구체적인 구현이 아닌, 추상적인 약속(인터페이스)에 의존하라"**는 것입니다.

- **의존성 규칙:** 모든 의존성은 바깥쪽(세부 구현)에서 안쪽(핵심 로직)으로만 향합니다.
- **구현 방법:** 파이썬에서는 `abc` 모듈의 추상 클래스를 '인터페이스'로 사용하여, 핵심 로직이 이 추상 클래스에만 의존하도록 설계합니다. 실제 구현체는 외부에서 생성하여 **주입(Dependency Injection)**해줍니다.

### ▶ 최종 아키텍처: `클린 아키텍처`

우리 프로젝트는 장기적인 유지보수와 확장성을 고려하여 **클린 아키텍처**를 최종 설계로 채택합니다. 이를 통해 **테스트 용이성**과 **유연성**을 극대화할 수 있습니다.

---

## 2. 개발 방법론

- **애자일 (Agile) 방식:** 기능 하나하나를 작은 목표로 삼아 **반복적으로 개발하고 테스트**하며 점진적으로 시스템을 완성해 나갑니다.
- **테스트 주도 개발 (TDD) 원칙 적용:** 핵심 로직, 특히 순수 함수에 대해서는 테스트 코드를 작성하여 안정성을 확보합니다.

---

## 3. 객체 지향 프로그래밍 (OOP)

클래스 기반 설계를 통해 각 객체의 책임을 명확히 분리합니다. 이는 우리가 채택한 클린 아키텍처를 자연스럽게 구현하는 방법입니다.

---

## 4. 환경 설정 (Environment Configuration)

개발, 운영 등 실행 환경에 따라 다른 설정을 사용할 수 있도록 환경을 분리합니다. 이는 민감한 정보를 안전하게 관리하고, 개발 중의 실수를 방지하기 위함입니다.

### 4.1. 설정 파일 분리
- **`config.development.ini`**: 개발 환경용 설정 파일.
- **`config.production.ini`**: 운영 환경용 설정 파일. (`.gitignore`에 추가 권장)

### 4.2. 환경 변수를 이용한 설정 선택
`APP_ENV` 환경 변수를 사용하여 로드할 설정 파일을 동적으로 결정합니다.

- **개발 모드 (기본값):** `python main.py`
- **운영 모드:** `APP_ENV=production python main.py`

---

## 5. 코딩 컨벤션

### 5.1. 핵심 원칙: PEP 8
파이썬의 공식 스타일 가이드인 **PEP 8**을 모든 코드의 기본 원칙으로 삼습니다.

### 5.2. 네이밍 컨벤션
- **변수, 함수, 메서드:** `snake_case`
- **클래스:** `PascalCase`
- **상수:** `ALL_CAPS`

### 5.3. 함수 및 메서드 설계
- **단일 책임 원칙:** 함수는 한 가지 일만 잘해야 합니다.
- **타입 힌팅 (필수):** 모든 인자와 반환 값에 타입을 명시합니다.
- **Docstrings (필수):** **Google Python 스타일**의 Docstring을 작성합니다.

### 5.4. 코드 레이아웃 및 임포트
- **들여쓰기:** 공백 4칸
- **최대 줄 길이:** 88자 (Black 포맷터 기준)
- **임포트 순서:** 표준 라이브러리 → 서드파티 → 로컬 애플리케이션

### 5.5. 자동화 도구
- **코드 포맷터:** `Black`
- **린터:** `Ruff`

---

## 6. 예외 처리

### 6.1. 기본 원칙
- **구체적인 예외 처리:** `except ValueError:` 처럼 특정 예외를 명시하여 처리합니다.
- **`try...except...else...finally`** 구문을 활용하여 코드 흐름을 명확히 합니다.

### 6.2. 커스텀 예외 정의
`ConfigError`, `ContentGenerationError`, `ImageDownloadError`, `NaverLoginError`, `NaverAutomationError`, `NaverPublishError` 등 프로젝트 도메인에 맞는 커스텀 예외를 정의하여 사용합니다. 이 예외들은 `domain.py`, `infrastructure.py`, `interfaces.py`에 정의되어 있습니다.

### 6.3. 아키텍처 계층별 예외 처리 전략
- **Infrastructure 계층:** 외부 라이브러리 예외를 커스텀 예외로 **감싸서** 다시 발생시킵니다.
- **Use Cases 계층:** 커스텀 예외를 비즈니스 정책에 따라 처리합니다.
- **Entrypoint 계층 (`main.py`):** 최종적으로 처리되지 않은 예외를 잡아 사용자에게 알리고 로그를 기록합니다.
- **리소스 정리:** `finally` 구문을 사용하여 웹 드라이버와 같은 리소스가 항상 해제되도록 보장합니다.